/**
 * dhcc-bsui-1.5.3.4
 * component:panel
 */(function(b){function k(a,d){var e=b.data(a,"panel"),c=e.options,e=e.panel,f=e.children(".panel-heading"),h=e.children(".panel-body"),g=e.children(".panel-footer");d&&b.extend(c,{width:d.width,height:d.height,minWidth:d.minWidth,maxWidth:d.maxWidth,minHeight:d.minHeight,maxHeight:d.maxHeight,left:d.left,top:d.top});e._size(c);f.add(h)._outerWidth(e.width());if(isNaN(parseInt(c.height))){h.css("height","");var r=b.parser.parseValue("minHeight",c.minHeight,e.parent()),t=b.parser.parseValue("maxHeight",c.maxHeight,e.parent()),f=f._outerHeight()+g._outerHeight()+e._outerHeight()-e.height();h._size("minHeight",r?r-f:"");h._size("maxHeight",t?t-f:"")}else h._outerHeight(e.height()-f._outerHeight()-g._outerHeight());e.css({height:"",minHeight:"",maxHeight:"",left:c.left,top:c.top});c.onResize.apply(a,[c.width,c.height]);b(a).panel("doLayout")}function z(a,d){var e=b.data(a,"panel"),c=e.options,e=e.panel;d&&(null!=d.left&&(c.left=d.left),null!=d.top&&(c.top=d.top));e.css({left:c.left,top:c.top});e.find(".tooltip-f").each(function(){b(this).tooltip("reposition")});c.onMove.apply(a,[c.left,c.top])}function A(a){b(a).addClass("panel-body card-block")._size("clear");var d=b('\x3cdiv class\x3d"panel panel-default card"\x3e\x3c/div\x3e').insertBefore(a);d[0].appendChild(a);d.bind("_resize",function(d,c){(b(this).hasClass("bsui-fluid")||c)&&k(a);return!1});return d}function B(a){function d(a,c,d){b('\x3ca href\x3d"javascript:void(0)"\x3e\x3c/a\x3e').addClass(c).appendTo(a).bind("click",d)}var e=b.data(a,"panel"),c=e.options,f=e.panel;f.css(c.style);c.cls&&f.addClass(c.cls);(function(){if(c.noheader||!c.title&&!c.header)f.children(".panel-heading")._remove(),f.children(".panel-body").addClass("panel-body-noheader");else{if(c.header)b(c.header).addClass("panel-heading card-header").prependTo(f[0]);else{var e=f.children(".panel-heading");e.length||(e=b('\x3cdiv class\x3d"panel-heading card-header"\x3e\x3c/div\x3e').prependTo(f));b.isArray(c.tools)||e.find("div.panel-tool .panel-tool-a").appendTo(c.tools);e.empty();var h=b('\x3cdiv class\x3d"panel-title card-title"\x3e\x3c/div\x3e').html(c.title).appendTo(e);c.iconCls&&(h.addClass("panel-with-icon"),b('\x3cdiv class\x3d"panel-icon pull-left"\x3e\x3c/div\x3e').addClass(c.iconCls).appendTo(e));var g=b('\x3cdiv class\x3d"panel-tool"\x3e\x3c/div\x3e').appendTo(e);g.bind("click",function(a){a.stopPropagation()});c.tools&&(b.isArray(c.tools)?b.map(c.tools,function(a){d(g,a.iconCls,eval(a.handler))}):b(c.tools).children().each(function(){b(this).addClass(b(this).attr("iconCls")).addClass("panel-tool-a").appendTo(g)}));c.collapsible&&d(g,"panel-tool-collapse",function(){1==c.collapsed?u(a,!0):n(a,!0)});c.minimizable&&d(g,"panel-tool-min",function(){v(a)});c.maximizable&&d(g,"panel-tool-max",function(){1==c.maximized?w(a):p(a)});c.closable&&d(g,"panel-tool-close",function(){x(a)})}f.children("div.panel-body").removeClass("panel-body-noheader")}})();c.footer?(b(c.footer).addClass("panel-footer card-footer").appendTo(f),b(a).addClass("panel-body-nobottom")):(f.children(".panel-footer").remove(),b(a).removeClass("panel-body-nobottom"));var e=b(a).panel("header"),h=b(a).panel("body"),g=b(a).siblings(".panel-footer");c.border?(e.removeClass("panel-header-noborder"),h.removeClass("panel-body-noborder"),g.removeClass("panel-footer-noborder")):(e.addClass("panel-header-noborder"),h.addClass("panel-body-noborder"),g.addClass("panel-footer-noborder"));e.addClass(c.headerCls);h.addClass(c.bodyCls);b(a).attr("id",c.id||"");c.content&&(b(a).panel("clear"),b(a).html(c.content),b.parser.parse(b(a)))}function l(a,d){var e=b.data(a,"panel"),c=e.options;f&&(c.queryParams=d);if(c.href&&(!e.isLoaded||!c.cache)){var f=b.extend({},c.queryParams);0!=c.onBeforeLoad.call(a,f)&&(e.isLoaded=!1,c.loadingMessage&&(b(a).panel("clear"),b(a).html(b('\x3cdiv class\x3d"panel-loading"\x3e\x3c/div\x3e').html(c.loadingMessage))),c.loader.call(a,f,function(d){var f=c.extractor.call(a,d);b(a).panel("clear");b(a).html(f);b.parser.parse(b(a));c.onLoad.apply(a,arguments);e.isLoaded=!0},function(){c.onLoadError.apply(a,arguments)}))}}function C(a){a=b(a);a.find(".combo-f").each(function(){b(this).combo("destroy")});a.find(".m-btn").each(function(){b(this).menubutton("destroy")});a.find(".s-btn").each(function(){b(this).splitbutton("destroy")});a.find(".tooltip-f").each(function(){b(this).tooltip("destroy")});a.children("div").each(function(){b(this)._size("unfit")});a.empty()}function q(a){b(a).panel("doLayout",!0)}function y(a,d){function e(){c.closed=!1;c.minimized=!1;f.children(".panel-heading").find("a.panel-tool-restore").length&&(c.maximized=!0);c.onOpen.call(a);1==c.maximized&&(c.maximized=!1,p(a));1==c.collapsed&&(c.collapsed=!1,n(a));c.collapsed||(l(a),q(a))}var c=b.data(a,"panel").options,f=b.data(a,"panel").panel;if(1==d||0!=c.onBeforeOpen.call(a))if(f.stop(!0,!0),b.isFunction(c.openAnimation))c.openAnimation.call(a,e);else switch(c.openAnimation){case "slide":f.slideDown(c.openDuration,e);break;case "fade":f.fadeIn(c.openDuration,e);break;case "show":f.show(c.openDuration,e);break;default:f.show(),e()}}function x(a,d){function e(){f.closed=!0;f.onClose.call(a)}var c=b.data(a,"panel"),f=c.options,c=c.panel;if(1==d||0!=f.onBeforeClose.call(a))if(c.find(".tooltip-f").each(function(){b(this).tooltip("hide")}),c.stop(!0,!0),c._size("unfit"),b.isFunction(f.closeAnimation))f.closeAnimation.call(a,e);else switch(f.closeAnimation){case "slide":c.slideUp(f.closeDuration,e);break;case "fade":c.fadeOut(f.closeDuration,e);break;case "hide":c.hide(f.closeDuration,e);break;default:c.hide(),e()}}function n(a,d){var e=b.data(a,"panel").options,c=b.data(a,"panel").panel,f=c.children(".panel-body"),c=c.children(".panel-heading").find("a.panel-tool-collapse");1!=e.collapsed&&(f.stop(!0,!0),0!=e.onBeforeCollapse.call(a)&&(c.addClass("panel-tool-expand"),1==d?f.slideUp("normal",function(){e.collapsed=!0;e.onCollapse.call(a)}):(f.hide(),e.collapsed=!0,e.onCollapse.call(a))))}function u(a,d){var e=b.data(a,"panel").options,c=b.data(a,"panel").panel,f=c.children(".panel-body"),c=c.children(".panel-heading").find("a.panel-tool-collapse");0!=e.collapsed&&(f.stop(!0,!0),0!=e.onBeforeExpand.call(a)&&(c.removeClass("panel-tool-expand"),1==d?f.slideDown("normal",function(){e.collapsed=!1;e.onExpand.call(a);l(a);q(a)}):(f.show(),e.collapsed=!1,e.onExpand.call(a),l(a),q(a))))}function p(a){var d=b.data(a,"panel").options,e=b.data(a,"panel").panel.children(".panel-heading").find("a.panel-tool-max");1!=d.maximized&&(e.addClass("panel-tool-restore"),b.data(a,"panel").original||(b.data(a,"panel").original={width:d.width,height:d.height,left:d.left,top:d.top,fit:d.fit}),d.left=0,d.top=0,d.fit=!0,k(a),d.minimized=!1,d.maximized=!0,d.onMaximize.call(a))}function v(a){var d=b.data(a,"panel").options,e=b.data(a,"panel").panel;e._size("unfit");e.hide();d.minimized=!0;d.maximized=!1;d.onMinimize.call(a)}function w(a){var d=b.data(a,"panel").options,e=b.data(a,"panel").panel,c=e.children(".panel-heading").find("a.panel-tool-max");0!=d.maximized&&(e.show(),c.removeClass("panel-tool-restore"),b.extend(d,b.data(a,"panel").original),k(a),d.minimized=!1,d.maximized=!1,b.data(a,"panel").original=null,d.onRestore.call(a))}b.fn._remove=function(){return this.each(function(){b(this).remove();try{this.outerHTML=""}catch(a){}})};var m=null;b(window).unbind(".panel").bind("resize.panel",function(){m&&clearTimeout(m);m=setTimeout(function(){var a=b("body.layout");a.length?(a.layout("resize"),b("body").children(".bsui-fluid:visible").each(function(){b(this).triggerHandler("_resize")})):b("body").panel("doLayout");m=null},100)});b.fn.panel=function(a,d){if("string"==typeof a)return b.fn.panel.methods[a](this,d);a=a||{};return this.each(function(){var d=b.data(this,"panel"),c;d?(c=b.extend(d.options,a),d.isLoaded=!1):(c=b.extend({},b.fn.panel.defaults,b.fn.panel.parseOptions(this),a),b(this).attr("title",""),d=b.data(this,"panel",{options:c,panel:A(this),isLoaded:!1}));B(this);b(this).show();1==c.doSize&&k(this);1==c.closed||1==c.minimized?d.panel.hide():y(this)})};b.fn.panel.methods={options:function(a){return b.data(a[0],"panel").options},panel:function(a){return b.data(a[0],"panel").panel},header:function(a){return b.data(a[0],"panel").panel.children(".panel-heading")},footer:function(a){return a.panel("panel").children(".panel-footer")},body:function(a){return b.data(a[0],"panel").panel.children(".panel-body")},setTitle:function(a,d){return a.each(function(){b.data(this,"panel").options.title=d;b(this).panel("header").find("div.panel-title").html(d)})},open:function(a,b){return a.each(function(){y(this,b)})},close:function(a,b){return a.each(function(){x(this,b)})},destroy:function(a,d){return a.each(function(){var a=b.data(this,"panel"),c=a.options,a=a.panel;if(1==d||0!=c.onBeforeDestroy.call(this))b(this).panel("clear").panel("clear","footer"),a._remove(),c.onDestroy.call(this)})},clear:function(a,d){return a.each(function(){C("footer"==d?b(this).panel("footer"):this)})},refresh:function(a,d){return a.each(function(){var a=b.data(this,"panel");a.isLoaded=!1;d&&("string"==typeof d?a.options.href=d:a.options.queryParams=d);l(this)})},resize:function(a,b){return a.each(function(){k(this,b)})},doLayout:function(a,d){return a.each(function(){function a(a,e){if(a){var c=a==b("body")[0];b(a).find("div.panel:visible,div.accordion:visible,div.tabs-container:visible,div.layout:visible,.bsui-fluid:visible").filter(function(d,f){var g=b(f).parents(".panel-"+e+":first");return c?0==g.length:g[0]==a}).each(function(){b(this).triggerHandler("_resize",[d||!1])})}}a(this,"body");a(b(this).siblings(".panel-footer")[0],"footer")})},move:function(a,b){return a.each(function(){z(this,b)})},maximize:function(a){return a.each(function(){p(this)})},minimize:function(a){return a.each(function(){v(this)})},restore:function(a){return a.each(function(){w(this)})},collapse:function(a,b){return a.each(function(){n(this,b)})},expand:function(a,b){return a.each(function(){u(this,b)})}};b.fn.panel.parseOptions=function(a){var d=b(a),e=d.children(".panel-heading,header"),c=d.children(".panel-footer,footer");return b.extend({},b.parser.parseOptions(a,["id","width","height","left","top","title","iconCls","cls","headerCls","bodyCls","tools","href","method","header","footer",{cache:"boolean",fit:"boolean",border:"boolean",noheader:"boolean"},{collapsible:"boolean",minimizable:"boolean",maximizable:"boolean"},{closable:"boolean",collapsed:"boolean",minimized:"boolean",maximized:"boolean",closed:"boolean"},"openAnimation","closeAnimation",{openDuration:"number",closeDuration:"number"}]),{loadingMessage:void 0!=d.attr("loadingMessage")?d.attr("loadingMessage"):void 0,header:e.length?e.removeClass("panel-heading card-header"):void 0,footer:c.length?c.removeClass("panel-footer card-footer"):void 0})};b.fn.panel.defaults={id:null,title:null,iconCls:null,width:"auto",height:"auto",left:null,top:null,cls:null,headerCls:null,bodyCls:null,style:{},href:null,cache:!0,fit:!1,border:!0,doSize:!0,noheader:!1,content:null,collapsible:!1,minimizable:!1,maximizable:!1,closable:!1,collapsed:!1,minimized:!1,maximized:!1,closed:!1,openAnimation:!1,openDuration:400,closeAnimation:!1,closeDuration:400,tools:null,footer:null,header:null,queryParams:{},method:"get",href:null,loadingMessage:"Loading...",loader:function(a,d,e){var c=b(this).panel("options");if(!c.href)return!1;b.ajax({type:c.method,url:c.href,cache:!1,data:a,dataType:"html",success:function(a){d(a)},error:function(){e.apply(this,arguments)}})},extractor:function(a){var b=/<body[^>]*>((.|[\n\r])*)<\/body>/im.exec(a);return b?b[1]:a},onBeforeLoad:function(a){},onLoad:function(){},onLoadError:function(){},onBeforeOpen:function(){},onOpen:function(){},onBeforeClose:function(){},onClose:function(){},onBeforeDestroy:function(){},onDestroy:function(){},onResize:function(a,b){},onMove:function(a,b){},onMaximize:function(){},onRestore:function(){},onMinimize:function(){},onBeforeCollapse:function(){},onBeforeExpand:function(){},onCollapse:function(){},onExpand:function(){}}})(jQuery);